import{r as j,K as F,m as k,j as e}from"./app-C_Xl1hVa.js";import{P,a as V,b as B,C as M,c as K,d as q,e as D,f as R,E as G,g as J}from"./command-D3YZiJsq.js";import{I as l}from"./input-error-BRsi53bm.js";import{B as f,c as O}from"./button-DqRhH-eC.js";import{I as A}from"./input-BgaY3-Dz.js";import{L as c}from"./label-Ek_Qzl9A.js";import{S as g,a as b,b as N,c as _,d as v,e as I,f as d}from"./select-DbNF__10.js";import{I as p,C as z}from"./lucide-react-B24Ryqwv.js";import{C as H}from"./check-BHNhN0VU.js";import{L as Q}from"./loader-circle-Ci4U0guX.js";import"./index-TONUvGxE.js";import"./index-Ct41ffGo.js";import"./index-DArG0cmA.js";import"./index-CIcCVeoX.js";import"./index-BO-NzDL2.js";import"./trash-2-DQB0OJsE.js";import"./createLucideIcon-yyk1M_YS.js";import"./index-CbQObyKB.js";import"./index-CEQ1ywdH.js";import"./chevron-up-B22NFYOQ.js";import"./settings-2-BuY0IxDt.js";import"./eye-Dq-QgFiS.js";import"./mail-plus-DEJ5Dbdq.js";import"./menu-DrAMcTmL.js";import"./x-DWVAF11m.js";function ve({selectedMenu:r,onOpenChange:m}){const[C,y]=j.useState(!1),S=F().props.parentMenu,{data:a,setData:n,post:w,put:U,processing:u,errors:t,reset:i}=k({label:"",route_name:"",icon:"",type:"menu",is_parent:!0,parent_id:"",orderNumber:0,action:"add"}),L=["createLucideIcon","Icons"],x=p?Object.keys(p).filter(s=>!L.includes(s)).sort():[];j.useEffect(()=>{var s;r!=null&&(console.log("menu.type from props:",r.type),console.log("menu.icon from props:",r.icon),console.log("iconNames includes selectedMenu.icon?",x.includes(r.icon)),n("label",r.label),n("route_name",r.route_name),r.icon&&x.includes(r.icon)?(console.info("set icon",r.icon),n("icon",r.icon)):console.warn("Invalid or missing icon:",r.icon),n("type",r.type),n("is_parent",r.is_parent),n("parent_id",(s=r.parent_id)==null?void 0:s.toString()),n("orderNumber",r.order_number??1),n("action","update"))},[r]),setTimeout(()=>{console.log(a)},300);const T=s=>{s.preventDefault(),console.log(a.action),a.action=="add"&&w(route("menu.store"),{onSuccess:()=>{h(),m&&m(!1)},onError:o=>{console.log(o)}}),a.action=="update"&&U(route("menu.update",r==null?void 0:r.id),{onSuccess:()=>{h(),m&&m(!1)},onError:o=>{console.log(o)}})},h=()=>{i("label"),i("route_name"),i("icon"),i("type"),i("is_parent"),i("parent_id"),i("orderNumber"),i("action")};return e.jsxs("div",{children:[e.jsx("form",{className:"flex flex-col gap-6",onSubmit:T,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"label",children:"Label"}),e.jsx(A,{id:"label",type:"text",required:!0,tabIndex:1,autoComplete:"label",value:a.label,onChange:s=>n("label",s.target.value),placeholder:"contoh. Laporan Baru"}),e.jsx(l,{message:t.label})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(c,{htmlFor:"route_name",children:["Route Alias ",a.route_name]}),e.jsx(A,{id:"route_name",type:"text",tabIndex:2,autoComplete:"route_name",value:a.route_name,onChange:s=>n("route_name",s.target.value),placeholder:"contoh: report.index"}),e.jsx(l,{message:t.route_name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(c,{htmlFor:"icon",children:["Iconsss ",a.icon]}),e.jsxs(P,{open:C,onOpenChange:y,children:[e.jsx(V,{asChild:!0,children:e.jsxs(f,{variant:"outline",role:"combobox","aria-expanded":C,className:"w-full justify-between",tabIndex:3,children:[a.icon?e.jsx("div",{className:"flex items-center gap-2",children:(()=>{const s=a.icon,o=p[s];return o?e.jsxs(e.Fragment,{children:[j.createElement(o,{className:"h-4 w-4"}),e.jsx("span",{children:a.icon})]}):e.jsx("span",{className:"text-gray-400",children:"Invalid icon"})})()}):"Pilih Icon...",e.jsx(z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(B,{className:"w-full p-0",children:e.jsxs(M,{children:[e.jsx(K,{placeholder:"Cari icons..."}),e.jsxs(q,{children:[e.jsx(D,{children:"Tidak ada icon yang ditemukan."}),e.jsx(R,{children:e.jsx(G,{children:x.map(s=>{const o=p[s];return typeof o=="function"||typeof o=="object"&&o!==null&&"render"in o?e.jsxs(J,{value:s,onSelect:E=>{n("icon",E===a.icon?"":E),y(!1)},children:[e.jsx(H,{className:O("mr-2 h-4 w-4",a.icon===s?"opacity-100":"opacity-0")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"h-4 w-4"}),s]})]},s):null})})})]})]})})]}),e.jsx(l,{message:t.icon})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(c,{htmlFor:"is_parent",children:["Jenis Menu ",a.is_parent]}),e.jsxs(g,{value:a.is_parent?"MENU UTAMA":"MENU ANAK",onValueChange:s=>n("is_parent",s==="MENU UTAMA"),required:!0,children:[e.jsx(b,{id:"is_parent",tabIndex:4,className:"w-full",children:e.jsx(N,{placeholder:"Menu Utama / Menu Anak"})}),e.jsx(_,{children:e.jsxs(v,{children:[e.jsx(I,{children:"Jenis Menu"}),e.jsx(d,{value:"MENU UTAMA",children:"MENU UTAMA"}),e.jsx(d,{value:"MENU ANAK",children:"MENU ANAK"})]})})]}),e.jsx(l,{message:t.is_parent})]}),!a.is_parent&&e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(c,{htmlFor:"parent_id",children:["Menu Induk ",a.parent_id]}),e.jsxs(g,{value:a.parent_id,onValueChange:s=>n("parent_id",s),defaultValue:a.parent_id,children:[e.jsx(b,{id:"parent_id",tabIndex:5,className:"w-full",children:e.jsx(N,{placeholder:"Pilih Menu Induk"})}),e.jsx(_,{children:e.jsxs(v,{children:[e.jsx(I,{children:"Menu Induk"}),S.map(s=>e.jsx(d,{value:s.id.toString(),children:s.label},s.id))]})})]}),e.jsx(l,{message:t.parent_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(c,{htmlFor:"role",children:["Tipe Menu ",a.type]}),e.jsxs(g,{value:a.type,onValueChange:s=>n("type",s),defaultValue:"MENU",required:!0,children:[e.jsx(b,{id:"role",tabIndex:6,className:"w-full",children:e.jsx(N,{placeholder:"Pilih Tipe Menu"})}),e.jsx(_,{children:e.jsxs(v,{children:[e.jsx(I,{children:"Role Pengguna"}),["menu","form","api"].map(s=>e.jsx(d,{value:s,children:s.toLocaleUpperCase()},s))]})})]}),e.jsx(l,{message:t.type})]}),e.jsxs(f,{type:"submit",className:"mt-4 w-full",tabIndex:4,disabled:u,children:[u&&e.jsx(Q,{className:"h-4 w-4 animate-spin"}),"Simpan"]}),e.jsx(f,{variant:"outline",type:"reset",className:"w-full",tabIndex:5,disabled:u,onClick:()=>h(),children:"Batal"})]})}),status&&e.jsx("div",{className:"mb-4 text-center text-sm font-medium text-green-600",children:status})]})}export{ve as default};
