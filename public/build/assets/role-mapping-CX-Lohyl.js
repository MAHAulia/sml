import{j as s,m as k,r as f,L as I}from"./app-C_Xl1hVa.js";import{B as M}from"./button-DqRhH-eC.js";import{I as L}from"./input-BgaY3-Dz.js";import{B as P}from"./badge-CHbWDVaq.js";import{T as B}from"./trash-2-DQB0OJsE.js";import{A as R,S as D,I as x}from"./lucide-react-B24Ryqwv.js";import{S as C}from"./separator-BBQZ6g2_.js";import{A as E}from"./app-layout-CysLI2Wn.js";import{P as T}from"./page-layout-BP_AHUb4.js";import{L as $}from"./loader-circle-Ci4U0guX.js";import"./createLucideIcon-yyk1M_YS.js";import"./check-BHNhN0VU.js";import"./chevron-up-B22NFYOQ.js";import"./settings-2-BuY0IxDt.js";import"./eye-Dq-QgFiS.js";import"./mail-plus-DEJ5Dbdq.js";import"./menu-DrAMcTmL.js";import"./x-DWVAF11m.js";import"./index-TONUvGxE.js";import"./index-BO-NzDL2.js";import"./index-CIcCVeoX.js";import"./index-DArG0cmA.js";import"./index-Ct41ffGo.js";import"./index-DHJUp9Fh.js";import"./index-CEQ1ywdH.js";import"./icon-B9IMViqt.js";import"./dropdown-menu-BbCDsI0Y.js";import"./app-logo-icon-Cyg7kVt4.js";import"./heading-DizE24nP.js";function h({iconNode:m,className:p,label:j,onClick:t,info:g,badgeLabel:u,isDelete:i=!1}){return m?s.jsxs("div",{className:"flex justify-between border border-gray-300 p-2 rounded-lg items-center cursor-pointer",onClick:t,children:[s.jsxs("div",{className:"flex",children:[s.jsx(m,{className:p})," ",s.jsx("span",{className:"ml-4",children:j})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"mx-2 text-sm",children:g})," ",u?s.jsx(P,{variant:"default",className:"mx-2 w-16 text-sm",children:u}):null," ",i?s.jsx(B,{className:"text-red-500"}):s.jsx(R,{})]})]}):null}const U=[{title:"Maping Role to Menu",href:"/role/mapping"}];function je({menuData:m,role:p}){const{data:j,setData:t,put:g,processing:u}=k({menus:[]}),[i,b]=f.useState(null),[v,_]=f.useState(""),[d,S]=f.useState("");f.useEffect(()=>{m&&b(m)},[m]);const w=e=>{console.log("assign",e);const n=i==null?void 0:i.map(o=>{var r,l;return o.id==e.id&&((r=o.childs)==null?void 0:r.length)==0&&(o.is_mapped=!0),(l=o.childs)==null||l.map(c=>{c.id==e.id&&(c.is_mapped=!0)}),o});b(n),t("menus",n)},y=e=>{console.log("unasign",e);const n=i==null?void 0:i.map(o=>{var r,l;return o.id==e.id&&((r=o.childs)==null?void 0:r.length)==0&&(o.is_mapped=!1),(l=o.childs)==null||l.map(c=>{c.id==e.id&&(c.is_mapped=!1)}),o});b(n),t("menus",n)},N=i==null?void 0:i.map(e=>{var r;const n=e.label.toLowerCase().includes(d.toLowerCase())&&e.is_mapped,o=((r=e.childs)==null?void 0:r.filter(l=>l.is_mapped&&l.label.toLowerCase().includes(d.toLowerCase())))||[];return n||o.length>0?{...e,childs:o}:null}).filter(Boolean),a=i==null?void 0:i.map(e=>{var r;const n=e.label.toLowerCase().includes(v.toLowerCase())&&!e.is_mapped,o=((r=e.childs)==null?void 0:r.filter(l=>!l.is_mapped&&l.label.toLowerCase().includes(v.toLowerCase())))||[];return n||o.length>0?{...e,childs:o}:null}).filter(Boolean),A=()=>{console.log(JSON.stringify(j)),g(route("role.storemappingmenutorole",{role:p.id}),{onSuccess:()=>{console.log("Success")},onError:e=>{console.log("error",e)}})};return s.jsxs(E,{breadcrumbs:U,children:[s.jsx(I,{title:"Mapping Role/Peran ke Menu"}),s.jsxs(T,{title:"Mapping Role/Peran ke Menu",description:"Kelola mapping role/peran ke menu",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("h3",{className:"my-2 text-2xl font-bold",children:["Role/Peran : ",p.name]}),s.jsxs(M,{variant:"default",onClick:()=>A(),children:[s.jsx(D,{})," ",u&&s.jsx($,{className:"h-4 w-4 animate-spin"}),"Simpan"]})]}),s.jsx(C,{className:"mb-4"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"mr-2",children:[s.jsx("h4",{className:"text-xl font-bold",children:"Menu Tersedia"}),s.jsx(C,{className:"m-0"}),s.jsx(L,{className:"my-4",placeholder:"Cari Menu",onChange:e=>_(e.target.value)}),s.jsx("div",{className:"h-screen w-full overflow-auto rounded-lg border border-gray-50 p-2",children:a==null?void 0:a.filter(e=>(e==null?void 0:e.is_mapped)==!1).map(e=>{var o;const n=x[e==null?void 0:e.icon];return s.jsxs("div",{className:"p-1",children:[s.jsx(h,{iconNode:n,label:e==null?void 0:e.label,info:e==null?void 0:e.route_name,badgeLabel:e==null?void 0:e.type,onClick:()=>w(e)}),(o=e==null?void 0:e.childs)==null?void 0:o.filter(r=>(r==null?void 0:r.is_mapped)==!1).map(r=>{const l=x[r.icon];return s.jsx("div",{className:"my-2 ml-4",children:s.jsx(h,{iconNode:l,label:r.label,info:r.route_name,badgeLabel:r.type,onClick:()=>w(r)})},`child-unasign-${r.id}`)})]},`unasign-${e==null?void 0:e.id}`)})})]}),s.jsxs("div",{className:"ml-2",children:[s.jsx("h4",{className:"text-xl font-bold",children:"Menu Termaping"}),s.jsx(C,{}),s.jsx(L,{className:"my-4",placeholder:"Cari Menu",onChange:e=>S(e.target.value)}),s.jsx("div",{className:"h-screen w-full overflow-auto rounded-lg border border-gray-50 p-2",children:N==null?void 0:N.map(e=>{var o;const n=x[e==null?void 0:e.icon];return s.jsxs("div",{className:"p-1",children:[s.jsx(h,{iconNode:n,label:e==null?void 0:e.label,isDelete:!0,info:e==null?void 0:e.route_name,badgeLabel:e==null?void 0:e.type,onClick:()=>y(e)}),(o=e==null?void 0:e.childs)==null?void 0:o.filter(r=>(r==null?void 0:r.is_mapped)==!0).map(r=>{const l=x[r.icon];return s.jsx("div",{className:"my-2 ml-4",children:s.jsx(h,{iconNode:l,label:r.label,info:r.route_name,badgeLabel:r.type,isDelete:!0,onClick:()=>y(r)})},`child-mapped-${r.id}`)})]},`mapped-${e==null?void 0:e.id}`)})})]})]})]})]})}export{je as default};
