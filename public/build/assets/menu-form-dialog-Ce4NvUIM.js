import{r as c,K as F,m as P,j as e}from"./app-C_Xl1hVa.js";import{D as B,a as K,b as R,c as q,d as G}from"./dialog-B4YayxgI.js";import{P as J,a as H,b as O,C as V,c as z,d as Q,e as W,f as X,E as Y,g as Z}from"./command-D3YZiJsq.js";import{I as d}from"./input-error-BRsi53bm.js";import{B as b,c as $}from"./button-DqRhH-eC.js";import{I as S}from"./input-BgaY3-Dz.js";import{L as m}from"./label-Ek_Qzl9A.js";import{S as N,a as v,b as _,c as C,d as I,e as y,f as j}from"./select-DbNF__10.js";import{I as f,C as ee}from"./lucide-react-B24Ryqwv.js";import{L as ae}from"./loader-circle-Ci4U0guX.js";import{C as se}from"./check-BHNhN0VU.js";import"./index-BO-NzDL2.js";import"./index-TONUvGxE.js";import"./index-CIcCVeoX.js";import"./x-DWVAF11m.js";import"./createLucideIcon-yyk1M_YS.js";import"./index-Ct41ffGo.js";import"./index-DArG0cmA.js";import"./trash-2-DQB0OJsE.js";import"./index-CbQObyKB.js";import"./index-CEQ1ywdH.js";import"./chevron-up-B22NFYOQ.js";import"./settings-2-BuY0IxDt.js";import"./eye-Dq-QgFiS.js";import"./mail-plus-DEJ5Dbdq.js";import"./menu-DrAMcTmL.js";function De({selectedMenu:n,isOpen:U,setIsOpen:p,isView:l=!0}){const[u,E]=c.useState(!1),M=c.useRef(null),D=F().props.parentMenu,{data:r,setData:i,post:T,put:w,processing:g,errors:o,reset:t}=P({label:"",route_name:"",icon:"",type:"menu",is_parent:!0,parent_id:"",orderNumber:0,action:"add"}),k=["createLucideIcon","Icons","default"],x=c.useMemo(()=>Object.keys(f).filter(a=>{if(k.includes(a)||a.includes("Icon"))return!1;const s=f[a];return typeof s=="function"||typeof s=="object"&&s!==null&&"render"in s}).sort(),[]);c.useEffect(()=>{var a;n!=null?(i("label",n.label),i("route_name",n.route_name),n.icon&&x.includes(n.icon)&&i("icon",n.icon),i("type",n.type),i("is_parent",n.is_parent),i("parent_id",(a=n.parent_id)==null?void 0:a.toString()),i("orderNumber",n.order_number??1),i("action","update")):h()},[n]),c.useEffect(()=>{var a;u&&((a=M.current)==null||a.focus())},[u]);const L=a=>{a.preventDefault(),console.log(r.action),r.action=="add"&&T(route("menu.store"),{onSuccess:()=>{h(),p&&p(!1)},onError:s=>{console.log(s)}}),r.action=="update"&&w(route("menu.update",n==null?void 0:n.id),{onSuccess:()=>{h(),p&&p(!1)},onError:s=>{console.log(s)}})},h=()=>{t("label"),t("route_name"),t("icon"),t("type"),t("is_parent"),t("parent_id"),t("orderNumber"),t("action")};return e.jsx(B,{open:U,onOpenChange:p,children:e.jsxs(K,{className:"sm:max-w-[512px]",children:[e.jsxs(R,{children:[e.jsx(q,{children:"Detail Menu"}),e.jsx(G,{children:"Informasi detail Menu"})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{children:[e.jsx("form",{className:"flex flex-col gap-6",onSubmit:L,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"label",children:"Label"}),e.jsx(S,{id:"label",type:"text",required:!0,tabIndex:1,autoComplete:"label",value:r.label,onChange:a=>i("label",a.target.value),placeholder:"contoh. Laporan Baru",disabled:l}),e.jsx(d,{message:o.label})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"route_name",children:"Route Alias"}),e.jsx(S,{id:"route_name",type:"text",tabIndex:2,autoComplete:"route_name",value:r.route_name,onChange:a=>i("route_name",a.target.value),placeholder:"contoh: report.index",disabled:l}),e.jsx(d,{message:o.route_name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"icon",children:"Icon"}),e.jsxs(J,{open:u,onOpenChange:E,children:[e.jsx(H,{asChild:!0,className:"w-full",children:e.jsxs(b,{variant:"outline",role:"combobox","aria-expanded":u,className:"w-full justify-between",tabIndex:3,children:[r.icon?e.jsx("div",{className:"flex items-center gap-2",children:(()=>{const a=r.icon,s=f[a];return s?e.jsxs(e.Fragment,{children:[c.createElement(s,{className:"h-4 w-4"}),e.jsx("span",{children:r.icon})]}):e.jsx("span",{className:"text-gray-400",children:"Invalid icon"})})()}):"Pilih Icon...",e.jsx(ee,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(O,{className:"w-full p-0",children:e.jsxs(V,{children:[e.jsx(z,{placeholder:"Cari icons..."}),e.jsxs(Q,{children:[e.jsx(W,{children:"Tidak ada icon yang ditemukan."}),e.jsx(X,{children:e.jsx(Y,{children:Array.isArray(x)&&x.length>0?x.map(a=>{const s=f[a];return typeof s=="function"||typeof s=="object"&&s!==null&&"render"in s?e.jsxs(Z,{value:a,onSelect:A=>{i("icon",A===r.icon?"":A),E(!1)},className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{className:"h-4 w-4"}),a]}),e.jsx(se,{className:$("mr-2 h-4 w-4",r.icon===a?"opacity-100":"opacity-0")})]},a):null}):e.jsx("div",{className:"text-muted text-sm p-2",children:"Tidak ada icon ditemukan"})})})]})]})})]}),e.jsx(d,{message:o.icon})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"is_parent",children:"Jenis Menu"}),e.jsxs(N,{value:r.is_parent?"MENU UTAMA":"MENU ANAK",onValueChange:a=>i("is_parent",a==="MENU UTAMA"),required:!0,disabled:l,children:[e.jsx(v,{id:"is_parent",tabIndex:4,className:"w-full",children:e.jsx(_,{placeholder:"Menu Utama / Menu Anak"})}),e.jsx(C,{children:e.jsxs(I,{children:[e.jsx(y,{children:"Jenis Menu"}),e.jsx(j,{value:"MENU UTAMA",children:"MENU UTAMA"}),e.jsx(j,{value:"MENU ANAK",children:"MENU ANAK"})]})})]}),e.jsx(d,{message:o.is_parent})]}),!r.is_parent&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"parent_id",children:"Menu Induk"}),e.jsxs(N,{value:r.parent_id,onValueChange:a=>i("parent_id",a),defaultValue:r.parent_id,disabled:l,children:[e.jsx(v,{id:"parent_id",tabIndex:5,className:"w-full",children:e.jsx(_,{placeholder:"Pilih Menu Induk"})}),e.jsx(C,{children:e.jsxs(I,{children:[e.jsx(y,{children:"Menu Induk"}),D.map(a=>e.jsx(j,{value:a.id.toString(),children:a.label},a.id))]})})]}),e.jsx(d,{message:o.parent_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"role",children:"Tipe Menu"}),e.jsxs(N,{value:r.type,onValueChange:a=>i("type",a),defaultValue:"MENU",required:!0,disabled:l,children:[e.jsx(v,{id:"role",tabIndex:6,className:"w-full",children:e.jsx(_,{placeholder:"Pilih Tipe Menu"})}),e.jsx(C,{children:e.jsxs(I,{children:[e.jsx(y,{children:"Tipe Menu"}),["menu","form","api"].map(a=>e.jsx(j,{value:a,children:a.toLocaleUpperCase()},a))]})})]}),e.jsx(d,{message:o.type})]}),!l&&e.jsxs(b,{type:"submit",className:"mt-4 w-full",tabIndex:4,disabled:g,children:[g&&e.jsx(ae,{className:"h-4 w-4 animate-spin"}),"Simpan"]}),r.action=="add"&&!l&&e.jsx(b,{variant:"outline",type:"reset",className:"w-full",tabIndex:5,disabled:g,onClick:()=>h(),children:"Batal"})]})}),status&&e.jsx("div",{className:"mb-4 text-center text-sm font-medium text-green-600",children:status})]})})]})})}export{De as default};
